## MCP Server with Database Query

---

### Setup

- Use the latest version of Python and [uv](https://docs.astral.sh/uv/).
- Install and run PostresDB locally.
- Install Claude Desktop as the AI agent to access the mcp server tools.

Run the following commands to setup the virtual environment for the project

```
uv venv
source .venv/Scripts/activate
```
Install all the necessary packages after the virtual environment is setup.

```
uv pip install -r pyproject.toml
```

---

### Configuration

Use the `.sample-env` and update it with the necessary credentials. Save the file with the filename `.env`

`OPENAI_API_KEY` is the API key generated by the company OpenAPI account and is used to extract embeddings from OpenAI LLM.
`DBUSER` is the Postgres Database username.
`DBPASSWORD` is the password associated with the user.
`DBURL` is the location of the database. Will be `localhost` if the database is hosted on the local machine.
`DBPORT` will be `5432` for Postgres.
`DBDATABASE` will be the default database to access for this project.

---

## Setup

- Run `mcp install` to update the claude config file `claude_desktop_config.json` with the basic parameters.
- Add the dependencies directly to the claude config file. Example: `psycopg2-binary` in the config section below:
```
{
  "mcpServers": {
    "Demo MCP Database Server": {
      "command": "path\\to\\uv\\command\\uv.EXE",
      "args": [
        "run",
        "--with",
        "mcp[cli]",
        "--with",
        "psycopg2-binary",
        "--with",
        "python-dotenv",
        "--with",
        "sqlalchemy",
        "mcp",
        "run",
        "path\\to\\app\\file\\server.py"
      ]
    }
  }
}
```
- Once Claude Desktop is started, it will be connected with the tools exposed by the mcp server.